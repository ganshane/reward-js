{"version":3,"file":"reward-api.common.js","sources":["../src/config.js","../src/fetch.js","../src/constants.js","../src/modules/goods.js","../src/store.js","../src/index.js"],"sourcesContent":["export default {\n  haodankuApi: 'https://v2.api.haodanku.com',\n  haodankuKey: 'maxd'\n}\n","import fly from 'flyio'\nimport config from './config'\n\nfly.config.headers = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n}\n\nfunction baseHaodanku (apiName, parameterNames, defaultParameters, parameters) {\n  const values = Object.assign(defaultParameters, parameters)\n  let url = config.haodankuApi + '/' + apiName + '/apikey/' + config.haodankuKey\n  parameterNames.forEach(name => {\n    if (values[name] !== undefined) url += '/' + name + '/' + values[name]\n  })\n  return fly.get(url)\n    .then(res => {\n      if (res.code === 0) {\n        throw new Error(res.msg)\n      } else return JSON.parse(res.data)\n    })\n}\n/**\n   * 商品列表页API\n   * https://www.haodanku.com/api/detail/show/1.html\n   * @param {*} parameters 见API描述页\n   */\nexport const itemlist = (parameters) => {\n  const parameterNames = ['nav', 'cid', 'back', 'min_id', 'sort', 'price_min', 'price_max', 'sale_min', 'sale_max', 'coupon_min', 'coupon_max', 'tkrates_min', 'tkrates_max', 'tkmoney_min', 'item_type']\n  const defaultParameters = { nav: 3, cid: 0, back: 10, minId: 1 }\n  return baseHaodanku('itemlist', parameterNames, defaultParameters, parameters)\n}\n/**\n   * 单品详情API\n   * https://www.haodanku.com/api/detail/show/16.html\n   * @param {*} parameters 见API描述页\n   */\nexport const item_detail = (parameters) => {\n  const parameterNames = ['itemid']\n  return baseHaodanku('item_detail', parameterNames, {}, parameters)\n}\n/**\n   * 超级搜索API\n   * https://www.haodanku.com/api/detail/show/19.html\n   * @param {*} parameters 见API描述页\n   */\nexport const supersearch = (parameters) => {\n  const parameterNames = ['keyword', 'back', 'min_id', 'tb_p', 'sort', 'is_tmall', 'is_coupon', 'limitrate', 'startprice']\n  return baseHaodanku('supersearch', parameterNames, {}, parameters)\n}\n/**\n   * 超级分类API\n   * https://www.haodanku.com/api/detail/show/9.html\n   * @param {*} parameters 见API描述页\n   */\nexport const super_classify = (parameters) => {\n  const parameterNames = []\n  return baseHaodanku('super_classify', parameterNames, {}, parameters)\n}\n/**\n   * 超级分类API\n   * https://www.haodanku.com/api/detail/show/9.html\n   * @param {*} parameters 见API描述页\n   */\nexport const column = (parameters) => {\n  const parameterNames = ['type', 'back', 'min_id', 'sort', 'cid', 'price_min', 'price_max', 'sale_min', 'sale_max', 'coupon_min', 'coupon_max', 'item_type']\n  return baseHaodanku('column', parameterNames, {}, parameters)\n}\n","export const HAODANKU_API_NAMES = ['itemlist', 'item_detail', 'supersearch', 'super_classify', 'column']\n","import * as api from './../fetch'\nimport { HAODANKU_API_NAMES } from './../constants'\n\nfunction createHaodankuState () {\n  const s = {}\n  HAODANKU_API_NAMES.forEach(e => {\n    s[e] = { 'data': [], 'min_id': 1 }\n  })\n  return s\n}\n\nfunction createHaodankuApi () {\n  const methods = {}\n  HAODANKU_API_NAMES.forEach(e => {\n    methods[e] = function ({ commit, state }, parameters) {\n      const parameterWithMinId = Object.assign({ min_id: state[e]['min_id'] }, parameters)\n      api[e].call(this, parameterWithMinId).then(res => {\n        commit(e, res)\n      })\n    }\n  })\n\n  return methods\n}\n\nconst mutations = {\n  'itemlist' (state, res) {\n    state.itemlist.data.push(...res.data)\n    state.itemlist.min_id = res.min_id\n  },\n  'item_detail' (state, res) {\n    state.item_detail.data = res.data\n  },\n  'supersearch' (state, res) {\n    state.supersearch.data.push(...res.data)\n    state.supersearch.min_id = res.min_id\n  },\n  'super_classify' (state, res) {\n    state.super_classify.data = res.data\n    // state.super_classify.min_id = res.min_id\n  },\n  'column' (state, res) {\n    state.column.data.push(...res.data)\n    state.column.min_id = res.min_id\n  }\n}\n\nexport default {\n  namespaced: true,\n  state: createHaodankuState(),\n  actions: createHaodankuApi(),\n  mutations\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport goods from './modules/goods'\n\nVue.use(Vuex)\nexport default new Vuex.Store({\n  modules: {\n    goods\n  }\n})\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport store from './store'\nimport config from './config'\nimport api from 'helpers'\n\nexport default {\n  config,\n  store,\n  api,\n  version: '__VERSION__'\n}\n"],"names":["const","let","api"],"mappings":";;;;;;;;;;;;;;AAAA,aAAe;AACf,EAAE,WAAW,EAAE,6BAA6B;AAC5C,EAAE,WAAW,EAAE,MAAM;AACrB;;ACAA,GAAG,CAAC,MAAM,CAAC,OAAO,GAAG;AACrB,EAAE,cAAc,EAAE,mCAAmC;AACrD,EAAC;AACD;AACA,SAAS,YAAY,EAAE,OAAO,EAAE,cAAc,EAAE,iBAAiB,EAAE,UAAU,EAAE;AAC/E,EAAEA,IAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,EAAE,UAAU,EAAC;AAC7D,EAAEC,IAAI,GAAG,GAAG,MAAM,CAAC,WAAW,GAAG,GAAG,GAAG,OAAO,GAAG,UAAU,GAAG,MAAM,CAAC,YAAW;AAChF,EAAE,cAAc,CAAC,OAAO,WAAC,MAAQ;AACjC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,SAAS,IAAE,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,MAAM,CAAC,IAAI,IAAC;AAC1E,GAAG,EAAC;AACJ,EAAE,OAAO,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;AACrB,KAAK,IAAI,WAAC,KAAO;AACjB,MAAM,IAAI,GAAG,CAAC,IAAI,KAAK,CAAC,EAAE;AAC1B,QAAQ,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC;AAChC,OAAO,QAAM,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,GAAC;AACxC,KAAK,CAAC;AACN,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,AAAOD,IAAM,QAAQ,aAAI,UAAU,EAAK;AACxC,EAAEA,IAAM,cAAc,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU,EAAE,YAAY,EAAE,YAAY,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,WAAW,EAAC;AACzM,EAAEA,IAAM,iBAAiB,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,GAAE;AAClE,EAAE,OAAO,YAAY,CAAC,UAAU,EAAE,cAAc,EAAE,iBAAiB,EAAE,UAAU,CAAC;AAChF,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,AAAOA,IAAM,WAAW,aAAI,UAAU,EAAK;AAC3C,EAAEA,IAAM,cAAc,GAAG,CAAC,QAAQ,EAAC;AACnC,EAAE,OAAO,YAAY,CAAC,aAAa,EAAE,cAAc,EAAE,EAAE,EAAE,UAAU,CAAC;AACpE,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,AAAOA,IAAM,WAAW,aAAI,UAAU,EAAK;AAC3C,EAAEA,IAAM,cAAc,GAAG,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,WAAW,EAAE,YAAY,EAAC;AAC1H,EAAE,OAAO,YAAY,CAAC,aAAa,EAAE,cAAc,EAAE,EAAE,EAAE,UAAU,CAAC;AACpE,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,AAAOA,IAAM,cAAc,aAAI,UAAU,EAAK;AAC9C,EAAEA,IAAM,cAAc,GAAG,GAAE;AAC3B,EAAE,OAAO,YAAY,CAAC,gBAAgB,EAAE,cAAc,EAAE,EAAE,EAAE,UAAU,CAAC;AACvE,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,AAAOA,IAAM,MAAM,aAAI,UAAU,EAAK;AACtC,EAAEA,IAAM,cAAc,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU,EAAE,YAAY,EAAE,YAAY,EAAE,WAAW,EAAC;AAC7J,EAAE,OAAO,YAAY,CAAC,QAAQ,EAAE,cAAc,EAAE,EAAE,EAAE,UAAU,CAAC;AAC/D,CAAC;;;;;;;;;;;ACjEMA,IAAM,kBAAkB,GAAG,CAAC,UAAU,EAAE,aAAa,EAAE,aAAa,EAAE,gBAAgB,EAAE,QAAQ,CAAC;;ACGxG,SAAS,mBAAmB,IAAI;AAChC,EAAEA,IAAM,CAAC,GAAG,GAAE;AACd,EAAE,kBAAkB,CAAC,OAAO,WAAC,GAAK;AAClC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,GAAE;AACtC,GAAG,EAAC;AACJ,EAAE,OAAO,CAAC;AACV,CAAC;AACD;AACA,SAAS,iBAAiB,IAAI;AAC9B,EAAEA,IAAM,OAAO,GAAG,GAAE;AACpB,EAAE,kBAAkB,CAAC,OAAO,WAAC,GAAK;AAClC,IAAI,OAAO,CAAC,CAAC,CAAC,GAAG,aAA2B,EAAE,UAAU,EAAE;8BAArB;;AAAsB;AAC3D,MAAMA,IAAM,kBAAkB,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,UAAU,EAAC;AAC1F,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,kBAAkB,CAAC,CAAC,IAAI,WAAC,KAAO;AACxD,QAAQ,MAAM,CAAC,CAAC,EAAE,GAAG,EAAC;AACtB,OAAO,EAAC;AACR,MAAK;AACL,GAAG,EAAC;AACJ;AACA,EAAE,OAAO,OAAO;AAChB,CAAC;AACD;AACAA,IAAM,SAAS,GAAG;AAClB,EAAE,6BAAU,EAAE,KAAK,EAAE,GAAG,EAAE;;AAAC;AAC3B,WAAI,KAAK,CAAC,QAAQ,CAAC,MAAK,UAAI,MAAI,GAAG,CAAC,IAAI,EAAC;AACzC,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG,CAAC,OAAM;AACtC,GAAG;AACH,EAAE,mCAAa,EAAE,KAAK,EAAE,GAAG,EAAE;AAC7B,IAAI,KAAK,CAAC,WAAW,CAAC,IAAI,GAAG,GAAG,CAAC,KAAI;AACrC,GAAG;AACH,EAAE,mCAAa,EAAE,KAAK,EAAE,GAAG,EAAE;;AAAC;AAC9B,WAAI,KAAK,CAAC,WAAW,CAAC,MAAK,UAAI,MAAI,GAAG,CAAC,IAAI,EAAC;AAC5C,IAAI,KAAK,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,CAAC,OAAM;AACzC,GAAG;AACH,EAAE,yCAAgB,EAAE,KAAK,EAAE,GAAG,EAAE;AAChC,IAAI,KAAK,CAAC,cAAc,CAAC,IAAI,GAAG,GAAG,CAAC,KAAI;AACxC;AACA,GAAG;AACH,EAAE,yBAAQ,EAAE,KAAK,EAAE,GAAG,EAAE;;AAAC;AACzB,WAAI,KAAK,CAAC,MAAM,CAAC,MAAK,UAAI,MAAI,GAAG,CAAC,IAAI,EAAC;AACvC,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,OAAM;AACpC,GAAG;AACH,EAAC;AACD;AACA,YAAe;AACf,EAAE,UAAU,EAAE,IAAI;AAClB,EAAE,KAAK,EAAE,mBAAmB,EAAE;AAC9B,EAAE,OAAO,EAAE,iBAAiB,EAAE;AAC9B,aAAE,SAAS;AACX,CAAC;;AC/CD,GAAG,CAAC,GAAG,CAAC,IAAI,EAAC;AACb,YAAe,IAAI,IAAI,CAAC,KAAK,CAAC;AAC9B,EAAE,OAAO,EAAE;AACX,WAAI,KAAK;AACT,GAAG;AACH,CAAC,CAAC;;ACHF,YAAe;AACf,UAAE,MAAM;AACR,SAAE,KAAK;AACP,OAAEE,KAAG;AACL,EAAE,OAAO,EAAE,OAAa;AACxB,CAAC;;;;"}