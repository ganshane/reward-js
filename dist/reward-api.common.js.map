{"version":3,"file":"reward-api.common.js","sources":["../src/config.js","../src/fetch.js","../src/modules/goods.js","../src/store.js","../src/index.js"],"sourcesContent":["export default {\n  haodankuApi: 'https://v2.api.haodanku.com',\n  haodankuKey: 'maxd'\n}\n","import fly from 'flyio'\nimport config from './config'\n\nfly.config.headers = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n}\n\nconst baseHaodanku = function (apiName, parameterNames, defaultParameters, parameters) {\n  const values = Object.assign(defaultParameters, parameters)\n  let url = config.haodankuApi + '/' + apiName + '/apikey/' + config.haodankuKey\n  parameterNames.forEach(name => {\n    if (values[name] !== undefined) url += '/' + name + '/' + values[name]\n  })\n  return fly.get(url)\n    .then(res => {\n      return JSON.parse(res.data)\n    })\n}\nexport default {\n  /**\n   * 商品列表页API\n   * https://www.haodanku.com/api/detail/show/1.html\n   * @param {*} parameters 见API描述页\n   */\n  itemlist (parameters) {\n    const parameterNames = ['nav', 'cid', 'back', 'min_id', 'sort', 'price_min', 'price_max', 'sale_min', 'sale_max', 'coupon_min', 'coupon_max', 'tkrates_min', 'tkrates_max', 'tkmoney_min', 'item_type']\n    const defaultParameters = { nav: 3, cid: 0, back: 10, minId: 1 }\n    return baseHaodanku('itemlist', parameterNames, defaultParameters, parameters)\n  },\n  /**\n   * 单品详情API\n   * https://www.haodanku.com/api/detail/show/16.html\n   * @param {*} parameters 见API描述页\n   */\n  item_detail (parameters) {\n    const parameterNames = ['itemid']\n    return baseHaodanku('item_detail', parameterNames, {}, parameters)\n  },\n  /**\n   * 超级搜索API\n   * https://www.haodanku.com/api/detail/show/19.html\n   * @param {*} parameters 见API描述页\n   */\n  supersearch (parameters) {\n    const parameterNames = ['keyword', 'back', 'min_id', 'tb_p', 'sort', 'is_tmall', 'is_coupon', 'limitrate', 'startprice']\n    return baseHaodanku('supersearch', parameterNames, {}, parameters)\n  },\n  /**\n   * 超级分类API\n   * https://www.haodanku.com/api/detail/show/9.html\n   * @param {*} parameters 见API描述页\n   */\n  super_classify (parameters) {\n    const parameterNames = []\n    return baseHaodanku('super_classify', parameterNames, {}, parameters)\n  },\n  /**\n   * 超级分类API\n   * https://www.haodanku.com/api/detail/show/9.html\n   * @param {*} parameters 见API描述页\n   */\n  column (parameters) {\n    const parameterNames = ['type', 'back', 'min_id', 'sort', 'cid', 'price_min', 'price_max', 'sale_min', 'sale_max', 'coupon_min', 'coupon_max', 'item_type']\n    return baseHaodanku('column', parameterNames, {}, parameters)\n  }\n}\n","import api from './../fetch'\n\nconst HAODANKU_API_NAMES = ['itemlist', 'item_detail', 'supersearch', 'super_classify', 'column']\nconst createHaodankuState = function () {\n  const s = {}\n  HAODANKU_API_NAMES.forEach(e => {\n    s[e] = { 'data': [], 'min_id': 1 }\n  })\n  return s\n}\n\nconst state = createHaodankuState()\n\nconst createHaodankuApi = function () {\n  const methods = {}\n  HAODANKU_API_NAMES.forEach(e => {\n    methods[e] = function ({ commit, state }, parameters) {\n      const parameterWithMinId = Object.assign({ min_id: state[e]['min_id'] }, parameters)\n      api[e].call(this, parameterWithMinId).then(res => {\n        commit(e, res)\n      })\n    }\n  })\n\n  return methods\n}\n\nconst actions = {\n  ...createHaodankuApi()\n}\nconsole.log(actions)\n\nconst mutations = {\n  'itemlist' (state, res) {\n    state.itemlist.data.push(...res.data)\n    state.itemlist.min_id = res.min_id\n  },\n  'item_detail' (state, res) {\n    state.item_detail.data = res.data\n  },\n  'supersearch' (state, res) {\n    state.supersearch.data.push(...res.data)\n    state.supersearch.min_id = res.min_id\n  },\n  'super_classify' (state, res) {\n    state.super_classify.data = res.data\n    // state.super_classify.min_id = res.min_id\n  },\n  'column' (state, res) {\n    state.column.data.push(...res.data)\n    state.column.min_id = res.min_id\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  actions,\n  mutations\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport goods from './modules/goods'\n\nVue.use(Vuex)\nexport default new Vuex.Store({\n  modules: {\n    goods\n  }\n})\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport store from './store'\nimport config from './config'\n\nexport default {\n  config,\n  store,\n  version: '__VERSION__'\n}\n"],"names":["const","let"],"mappings":"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"}