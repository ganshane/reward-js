/**
 * reward-api v1.0.25
 * (c) 2020 Jun Tsai
 * @license Apache-2.0
 */
var e,n;e=this,n=function(e,n,t,i){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r={haodankuApi:"https://v2.api.haodanku.com",haodankuKey:"gofanli",haodanku_taobao_name:"zhyj_cn",taobaoke_pid:"mm_19052242_1281300405_110017350452",api:"https://api.gofanli.cn",isWx:!1},a=r.isWx||"undefined"!=typeof wx?new(require("flyio/dist/npm/wx")):require("flyio"),o={headers:{"content-type":"application/x-www-form-urlencoded"}},u=function(e,n){return a.post(""+r.api+e,n,o).then(function(e){return e.data})},s=function(e,n){return a.get(""+r.api+e,n).then(function(e){return e.data})},c=function(e){a.config.headers=Object.assign(a.config.headers,{Authorization:"Bearer "+e})},d={public:{announces:function(){return s("/public/announces")},slides:function(){return s("/public/slides")}},admin:{add_card:function(e){var n=e.no,t=e.secret,i=e.amount,r=e.created_id;return u("/admin/card/add",{no:n,secret:t,amount:i,created_id:r})},cards:function(e){var n=e.page,t=e.size,i=e.sort;return u("/admin/card/list",{page:n,size:t,sort:i})},add_slide:function(e){var n=e.img_url,t=e.url,i=e.status;return u("/admin/slide/add",{img_url:n,url:t,status:i})},delete_slide:function(e){return u("/admin/slide/delete",{id:e})},update_status:function(e){var n=e.id,t=e.status;return u("/admin/slide/status",{id:n,status:t})},slides:function(){return s("/admin/slide/list")},add_announce:function(e){var n=e.content,t=e.url;return u("/admin/announce/add",{content:n,url:t})},delete_announce:function(e){return u("/admin/announce/delete",{id:e})},announces:function(){return s("/admin/announce/list")},users:function(e){var n=e.page,t=e.size,i=e.sort;return u("/admin/users",{page:n,size:t,sort:i})}},consumption:{add:function(e){var n=e.amount,t=e.item_id,i=e.item_img,r=e.item_link;return u("/consumption/add",{amount:n,item_id:t,item_img:i,item_link:r})},list:function(e){var n=e.page,t=e.size,i=e.sort;return u("/consumption/list",{page:n,size:t,sort:i})}},recharge:{add:function(e){var n=e.no,t=e.secret;return u("/recharge/add",{no:n,secret:t})},list:function(e){var n=e.page,t=e.size,i=e.sort;return u("/recharge/list",{page:n,size:t,sort:i})}},user:{setToken:c,clearToken:function(){delete a.config.headers.Authorization},info:function(){return s("/user/info")},sendSms:function(e){return u("/user/sendSms",{phone:e})},login:function(e){var n=e.phone,t=e.code;return u("/user/login",{phone:n,code:t}).then(function(e){return c(e.token),e})}},wx:{login:function(e){return u("/wx/login",e).then(function(e){return c(e.token),e})}}};a.interceptors.request.use(function(e){e.url.indexOf("haodanku.com")>0&&delete e.headers.Authorization});var l={headers:{"content-type":"application/x-www-form-urlencoded"}};function f(e,n,t,i){var o=Object.assign(t,i),u=r.haodankuApi+"/"+e+"/apikey/"+r.haodankuKey;return n.forEach(function(e){o.hasOwnProperty(e)&&(u+="/"+e+"/"+o[e])}),a.get(u,{},l).then(function(e){var n="string"==typeof e.data?JSON.parse(e.data):e.data;if(0===n.code)throw console.error("\u6293\u53d6\u6570\u636e\u5931\u8d25,\u670d\u52a1\u5668\u6d88\u606f:",n.msg),new Error(n.msg);return n})}var m,p,_=Object.freeze({__proto__:null,itemlist:function(e){return f("itemlist",["nav","cid","back","min_id","sort","price_min","price_max","sale_min","sale_max","coupon_min","coupon_max","tkrates_min","tkrates_max","tkmoney_min","item_type"],{nav:3,cid:0,back:10,minId:1},e)},ratesurl:function(e){var n={apikey:r.haodankuKey,tb_name:r.haodanku_taobao_name,pid:r.taobaoke_pid},t=Object.assign(n,e);return a.post(r.haodanku_taobao_name+"/ratesurl",t,l).then(function(e){var n="string"==typeof e.data?JSON.parse(e.data):e.data;if(0===n.code)throw console.error("\u6293\u53d6\u6570\u636e\u5931\u8d25,msg:",n.msg),new Error(n.msg);return n})},get_deserve_item:function(){return f("get_deserve_item",[],{},{})},get_trill_data:function(e){return f("get_trill_data",["min_id","cat_id","order","back"],{},e)},low_price_Pinkage_data:function(e){return f("low_price_Pinkage_data",["min_id","order","type"],{},e)},brandinfo:function(e){return f("brandinfo",["min_id","back","brandcat"],{},e)},sales_list:function(e){return f("sales_list",["sale_type","min_id","cid","back","item_type"],{},e)},selected_item:function(e){return f("selected_item",["min_id"],{},e)},hot_key:function(){return f("hot_key",[],{},{})},get_similar_info:function(e){return f("get_similar_info",["itemid"],{},e)},item_detail:function(e){return f("item_detail",["itemid"],{},e)},supersearch:function(e){return f("supersearch",["keyword","back","min_id","tb_p","sort","is_tmall","is_coupon","limitrate","startprice"],{},e)},super_classify:function(e){return f("super_classify",[],{},e)},column:function(e){return f("column",["type","back","min_id","sort","cid","price_min","price_max","sale_min","sale_max","coupon_min","coupon_max","item_type"],{},e)}}),h=Object.assign(d,{haodanku:_}),g=["itemlist","item_detail","supersearch","super_classify","column"],y={itemlist:function(e,n){var t;(t=e.itemlist.data).push.apply(t,n.data),e.itemlist.min_id=n.min_id,console.log("modiy itemlist")},item_detail:function(e,n){e.item_detail.data=n.data},supersearch:function(e,n){var t;(t=e.supersearch.data).push.apply(t,n.data),e.supersearch.min_id=n.min_id},super_classify:function(e,n){e.super_classify.data=n.general_classify},column:function(e,n){var t;(t=e.column.data).push.apply(t,n.data),e.column.min_id=n.min_id}},v={namespaced:!0,state:(p={},g.forEach(function(e){p[e]={data:[],min_id:1}}),p),actions:(m={},g.forEach(function(e){m[e]=function(n,t){var i=n.commit,r=n.state,a=Object.assign({min_id:r[e].min_id},t);h.haodanku[e].call(this,a).then(function(n){i(e,n)})}}),m),mutations:y};n.use(t);var k=new t.Store({modules:{goods:v}}),w={goods:{actions:function(){var e={};return g.forEach(function(n){e[n]=function(e){k.dispatch("goods/"+n,e)}}),e}(),data:function(){var e={};return g.forEach(function(n){e[n+"_data"]=function(){return k.state.goods[n].data}}),e}()}},b="undefined"!=typeof wx?(i.promisifyAll(),function(){var e="";return wx.pro.login().then(function(n){return console.log("login res:",n),e=n.code,wx.pro.getSetting()}).then(function(e){if(e.authSetting["scope.userInfo"])return wx.pro.getUserInfo();throw new O}).then(function(n){console.log("\u4ece\u5fae\u4fe1\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f  ",n);var t={code:e,encrypted_data:n.encryptedData,iv:n.iv,raw_data:n.rawData,signature:n.signature};return h.wx.login(t)}).then(function(e){return console.log("\u767b\u5f55API\u670d\u52a1\u5668\u6210\u529f",e),h.user.info()})}):function(){},x=Object.freeze({__proto__:null,getUserInfo:b}),O=function(){};e.UserNotAuthorized=O,e.api=w,e.config=r,e.rest=h,e.store=k,e.wxApi=x,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("vue"),require("vuex"),require("wx-promise-pro")):"function"==typeof define&&define.amd?define(["exports","vue","vuex","wx-promise-pro"],n):n((e=e||self)["reward-api"]={},e.Vue,e.Vuex,e.wxPromisePro);