/**
 * reward-api v1.0.28
 * (c) 2020 Jun Tsai
 * @license Apache-2.0
 */
var t,e;t=this,e=function(t,e,n,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var o={haodankuApi:"https://v2.api.haodanku.com",haodankuKey:"gofanli",haodanku_taobao_name:"zhyj_cn",taobaoke_pid:"mm_19052242_1281300405_110017350452",api:"https://api.gofanli.cn",isWx:!1},a=function(t){if(t.isWx||"undefined"!=typeof wx){var e=require("flyio/dist/npm/wx");this.fly=new e}else this.fly=require("flyio");this.config=this.fly.config,this.interceptors=this.fly.interceptors,this.get=this.fly.get.bind(this.fly),this.post=this.fly.post.bind(this.fly)},r={headers:{"content-type":"application/x-www-form-urlencoded"}},s=function(){var t=this;this._post=function(e,n){return t.fly().post(""+o.api+e,n,r).then(function(t){return t.data})},this._get=function(e,n){return t.fly().get(""+o.api+e,n).then(function(t){return t.data})},this.internalSetToken=function(e){t.fly().config.headers=Object.assign(t.fly().config.headers,{Authorization:"Bearer "+e})},this.public={announces:function(){return t._get("/public/announces")},slides:function(){return t._get("/public/slides")},create_tpwd:function(e){var n=e.text,i=e.url,o=e.logo;return t._post("/public/tpwd",{text:n,url:i,logo:o})}},this.admin={add_card:function(e){var n=e.no,i=e.secret,o=e.amount,a=e.created_id;return t._post("/admin/card/add",{no:n,secret:i,amount:o,created_id:a})},cards:function(e){var n=e.page,i=e.size,o=e.sort;return t._post("/admin/card/list",{page:n,size:i,sort:o})},add_slide:function(e){var n=e.img_url,i=e.url,o=e.status;return t._post("/admin/slide/add",{img_url:n,url:i,status:o})},delete_slide:function(e){return t._post("/admin/slide/delete",{id:e})},update_status:function(e){var n=e.id,i=e.status;return t._post("/admin/slide/status",{id:n,status:i})},slides:function(){return t._get("/admin/slide/list")},add_announce:function(e){var n=e.content,i=e.url;return t._post("/admin/announce/add",{content:n,url:i})},delete_announce:function(e){return t._post("/admin/announce/delete",{id:e})},announces:function(){return t._get("/admin/announce/list")},users:function(e){var n=e.page,i=e.size,o=e.sort;return t._post("/admin/users",{page:n,size:i,sort:o})}},this.consumption={add:function(e){var n=e.amount,i=e.item_id,o=e.item_img,a=e.item_link;return t._post("/consumption/add",{amount:n,item_id:i,item_img:o,item_link:a})},list:function(e){var n=e.page,i=e.size,o=e.sort;return t._post("/consumption/list",{page:n,size:i,sort:o})}},this.recharge={add:function(e){var n=e.no,i=e.secret;return t._post("/recharge/add",{no:n,secret:i})},list:function(e){var n=e.page,i=e.size,o=e.sort;return t._post("/recharge/list",{page:n,size:i,sort:o})}},this.user={setToken:this.internalSetToken,clearToken:function(){delete t.fly().config.headers.Authorization},info:function(){return t._get("/user/info")},sendSms:function(e){return t._post("/user/sendSms",{phone:e})},login:function(e){var n=e.phone,i=e.code;return t._post("/user/login",{phone:n,code:i}).then(function(e){return t.internalSetToken(e.token),e})}},this.wx={login:function(e){return t._post("/wx/login",e).then(function(e){return t.internalSetToken(e.token),e})}}};s.prototype.fly=function(){return null==this.flyInstance&&(this.flyInstance=new a(o)),this.flyInstance};var u=new s,c={headers:{"content-type":"application/x-www-form-urlencoded"}},d=function(){};d.prototype.fly=function(){return null==this.flyInstance&&(this.flyInstance=new a(o)),this.flyInstance},d.prototype.baseHaodanku=function(t,e,n,i){var a=Object.assign(n,i),r=o.haodankuApi+"/"+t+"/apikey/"+o.haodankuKey;return e.forEach(function(t){a.hasOwnProperty(t)&&(r+="/"+t+"/"+a[t])}),this.fly().get(r,{},c).then(function(t){var e="string"==typeof t.data?JSON.parse(t.data):t.data;if(0===e.code)throw console.error("\u6293\u53d6\u6570\u636e\u5931\u8d25,\u670d\u52a1\u5668\u6d88\u606f:",e.msg),new Error(e.msg);return e})},d.prototype.itemlist=function(t){return this.baseHaodanku("itemlist",["nav","cid","back","min_id","sort","price_min","price_max","sale_min","sale_max","coupon_min","coupon_max","tkrates_min","tkrates_max","tkmoney_min","item_type"],{nav:3,cid:0,back:10,minId:1},t)},d.prototype.ratesurl=function(t){var e={apikey:o.haodankuKey,tb_name:o.haodanku_taobao_name,pid:o.taobaoke_pid},n=Object.assign(e,t);return this.fly().post(o.haodanku_taobao_name+"/ratesurl",n,c).then(function(t){var e="string"==typeof t.data?JSON.parse(t.data):t.data;if(0===e.code)throw console.error("\u6293\u53d6\u6570\u636e\u5931\u8d25,msg:",e.msg),new Error(e.msg);return e})},d.prototype.get_keyword_items=function(t){return this.baseHaodanku("get_keyword_items",["keyword","shopid","back","sort","cid","min_id","price_min","price_max","sale_min","sale_max","coupon_min","coupon_max","type"],{},t)},d.prototype.get_deserve_item=function(){return this.baseHaodanku("get_deserve_item",[],{},{})},d.prototype.get_trill_data=function(t){return this.baseHaodanku("get_trill_data",["min_id","cat_id","order","back"],{},t)},d.prototype.low_price_Pinkage_data=function(t){return this.baseHaodanku("low_price_Pinkage_data",["min_id","order","type"],{},t)},d.prototype.brandinfo=function(t){return this.baseHaodanku("brandinfo",["min_id","back","brandcat"],{},t)},d.prototype.sales_list=function(t){return this.baseHaodanku("sales_list",["sale_type","min_id","cid","back","item_type"],{},t)},d.prototype.selected_item=function(t){return this.baseHaodanku("selected_item",["min_id"],{},t)},d.prototype.hot_key=function(){return this.baseHaodanku("hot_key",[],{},{})},d.prototype.get_similar_info=function(t){return this.baseHaodanku("get_similar_info",["itemid"],{},t)},d.prototype.item_detail=function(t){return this.baseHaodanku("item_detail",["itemid"],{},t)},d.prototype.supersearch=function(t){return this.baseHaodanku("supersearch",["keyword","back","min_id","tb_p","sort","is_tmall","is_coupon","limitrate","startprice"],{},t)},d.prototype.super_classify=function(t){return this.baseHaodanku("super_classify",[],{},t)},d.prototype.column=function(t){return this.baseHaodanku("column",["type","back","min_id","sort","cid","price_min","price_max","sale_min","sale_max","coupon_min","coupon_max","item_type"],{},t)};var p,l,f=new d,_=Object.assign(u,{haodanku:f}),m=["itemlist","item_detail","supersearch","super_classify","column"],h={namespaced:!0,state:(l={},m.forEach(function(t){l[t]={data:[],min_id:1}}),l),actions:(p={},m.forEach(function(t){p[t]=function(e,n){var i=e.commit,o=e.state,a=Object.assign({min_id:o[t].min_id},n);_.haodanku[t](a).then(function(e){i(t,e)})}}),p),mutations:{itemlist:function(t,e){var n;(n=t.itemlist.data).push.apply(n,e.data),t.itemlist.min_id=e.min_id},item_detail:function(t,e){t.item_detail.data=e.data},supersearch:function(t,e){var n;(n=t.supersearch.data).push.apply(n,e.data),t.supersearch.min_id=e.min_id},super_classify:function(t,e){t.super_classify.data=e.general_classify},column:function(t,e){var n;(n=t.column.data).push.apply(n,e.data),t.column.min_id=e.min_id}}};e.use(n);var y=new n.Store({modules:{goods:h}}),g={goods:{actions:function(){var t={};return m.forEach(function(e){t[e]=function(t){y.dispatch("goods/"+e,t)}}),t}(),data:function(){var t={};return m.forEach(function(e){t[e+"_data"]=function(){return y.state.goods[e].data}}),t}()}},k=function(){},b="undefined"!=typeof wx?(i.promisifyAll(),function(){var t="";return wx.pro.login().then(function(e){return console.log("login res:",e),t=e.code,wx.pro.getSetting()}).then(function(t){if(t.authSetting["scope.userInfo"])return wx.pro.getUserInfo();throw new k}).then(function(e){console.log("\u4ece\u5fae\u4fe1\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f  ",e);var n={code:t,encrypted_data:e.encryptedData,iv:e.iv,raw_data:e.rawData,signature:e.signature};return _.wx.login(n)}).then(function(t){return console.log("\u767b\u5f55API\u670d\u52a1\u5668\u6210\u529f",t),_.user.info()})}):function(){},v=Object.freeze({__proto__:null,getUserInfo:b});t.UserNotAuthorized=k,t.api=g,t.config=o,t.rest=_,t.store=y,t.wxApi=v,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue"),require("vuex"),require("wx-promise-pro")):"function"==typeof define&&define.amd?define(["exports","vue","vuex","wx-promise-pro"],e):e((t=t||self)["reward-api"]={},t.vue,t.vuex,t["wx-promise-pro"]);